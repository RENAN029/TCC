<div class="request-container">
  <div class="progress-bar">
    <div class="progress-fill" [style.width.%]="getProgressPercentage()"></div>
  </div>

  <div class="steps-header">
    <h2>Solicitar Carteirinha</h2>
    <div class="steps-indicator">
      Passo {{ currentStep }} de {{ totalSteps }}
    </div>
  </div>

  <form (ngSubmit)="submitRequest()" class="request-form">
    <!-- Passo 1: Dados Pessoais -->
    <div *ngIf="currentStep === 1" class="form-step">
      <h3>Dados Pessoais</h3>
      
      <div class="form-grid">
        <div class="form-group">
          <label for="name">Nome Completo *</label>
          <input 
            type="text" 
            id="name"
            [(ngModel)]="request.personalInfo.name" 
            name="name"
            required
            class="form-input">
        </div>

        <div class="form-group">
          <label for="registrationNumber">N√∫mero de Matr√≠cula *</label>
          <input 
            type="text" 
            id="registrationNumber"
            [(ngModel)]="request.personalInfo.registrationNumber" 
            name="registrationNumber"
            placeholder="Sua matr√≠cula institucional"
            required
            class="form-input">
        </div>

        <div class="form-group">
          <label for="gender">G√™nero *</label>
          <select 
            id="gender"
            [(ngModel)]="request.personalInfo.gender" 
            name="gender"
            required
            class="form-input">
            <option value="">Selecione</option>
            <option value="masculino">Masculino</option>
            <option value="feminino">Feminino</option>
            <option value="outro">Outro</option>
            <option value="prefiro_nao_informar">Prefiro n√£o informar</option>
          </select>
        </div>

        <div class="form-group">
          <label for="birthDate">Data de Nascimento *</label>
          <input 
            type="date" 
            id="birthDate"
            [(ngModel)]="request.personalInfo.birthDate" 
            name="birthDate"
            required
            class="form-input">
        </div>

        <div class="form-group">
          <label for="cpf">CPF *</label>
          <input 
            type="text" 
            id="cpf"
            [(ngModel)]="request.personalInfo.cpf" 
            name="cpf"
            placeholder="000.000.000-00"
            required
            class="form-input">
        </div>

        <div class="form-group">
          <label for="educationLevel">Escolaridade *</label>
          <select 
            id="educationLevel"
            [(ngModel)]="request.personalInfo.educationLevel" 
            name="educationLevel"
            required
            class="form-input">
            <option value="">Selecione</option>
            <option value="ensino_medio">Ensino M√©dio</option>
            <option value="graduacao">Gradua√ß√£o</option>
            <option value="pos_graduacao">P√≥s-Gradua√ß√£o</option>
            <option value="mestrado">Mestrado</option>
            <option value="doutorado">Doutorado</option>
          </select>
        </div>
      </div>

      <div class="form-actions">
        <button 
          type="button" 
          (click)="nextStep()" 
          class="btn btn-primary">
          Continuar ‚Üí
        </button>
      </div>
    </div>

    <!-- Passo 2: Documentos -->
    <div *ngIf="currentStep === 2" class="form-step">
      <h3>Documentos</h3>
      
      <div class="documents-grid">
        <div class="document-upload">
          <label for="enrollmentFile">Comprovante de Matr√≠cula *</label>
          <div class="upload-area" [class.has-file]="request.documents.enrollmentFile">
            <input 
              type="file" 
              id="enrollmentFile"
              (change)="onEnrollmentFileSelected($event)"
              accept=".pdf,.jpg,.jpeg,.png"
              class="file-input">
            <div class="upload-content">
              <div class="upload-icon">üìÑ</div>
              <p *ngIf="!request.documents.enrollmentFile">
                Clique para selecionar o comprovante de matr√≠cula
              </p>
              <p *ngIf="request.documents.enrollmentFile" class="file-name">
                {{ request.documents.enrollmentFile.name }}
              </p>
            </div>
          </div>
        </div>

        <div class="document-upload">
          <label for="photoFile">Foto 3x4 *</label>
          <div class="upload-area" [class.has-file]="request.documents.photoFile">
            <input 
              type="file" 
              id="photoFile"
              (change)="onPhotoFileSelected($event)"
              accept=".jpg,.jpeg,.png"
              class="file-input">
            <div class="upload-content">
              <div class="upload-icon">üì∑</div>
              <p *ngIf="!request.documents.photoFile">
                Clique para selecionar foto 3x4
              </p>
              <p *ngIf="request.documents.photoFile" class="file-name">
                {{ request.documents.photoFile.name }}
              </p>
            </div>
          </div>
        </div>
      </div>

      <div class="upload-notes">
        <p><strong>Formatos aceitos:</strong></p>
        <ul>
          <li>Comprovante de matr√≠cula: PDF, JPG, PNG (m√°x. 5MB)</li>
          <li>Foto: JPG, PNG (m√°x. 2MB)</li>
          <li>Foto deve ser recente e com fundo neutro</li>
        </ul>
      </div>

      <div class="form-actions">
        <button 
          type="button" 
          (click)="prevStep()" 
          class="btn btn-secondary">
          ‚Üê Voltar
        </button>
        <button 
          type="button" 
          (click)="nextStep()" 
          class="btn btn-primary">
          Continuar ‚Üí
        </button>
      </div>
    </div>

    <!-- Passo 3: Endere√ßo -->
    <div *ngIf="currentStep === 3" class="form-step">
      <h3>Endere√ßo</h3>
      
      <div class="form-grid">
        <div class="form-group full-width">
          <label for="street">Logradouro *</label>
          <input 
            type="text" 
            id="street"
            [(ngModel)]="request.address.street" 
            name="street"
            placeholder="Rua, Avenida, etc."
            required
            class="form-input">
        </div>

        <div class="form-group">
          <label for="number">N√∫mero *</label>
          <input 
            type="text" 
            id="number"
            [(ngModel)]="request.address.number" 
            name="number"
            required
            class="form-input">
        </div>

        <div class="form-group">
          <label for="neighborhood">Bairro *</label>
          <input 
            type="text" 
            id="neighborhood"
            [(ngModel)]="request.address.neighborhood" 
            name="neighborhood"
            required
            class="form-input">
        </div>

        <div class="form-group">
          <label for="city">Cidade *</label>
          <input 
            type="text" 
            id="city"
            [(ngModel)]="request.address.city" 
            name="city"
            required
            class="form-input">
        </div>

        <div class="form-group">
          <label for="state">Estado *</label>
          <select 
            id="state"
            [(ngModel)]="request.address.state" 
            name="state"
            required
            class="form-input">
            <option value="">Selecione</option>
            <option value="AC">Acre</option>
            <option value="AL">Alagoas</option>
            <option value="AP">Amap√°</option>
            <option value="AM">Amazonas</option>
            <option value="BA">Bahia</option>
            <option value="CE">Cear√°</option>
            <option value="DF">Distrito Federal</option>
            <option value="ES">Esp√≠rito Santo</option>
            <option value="GO">Goi√°s</option>
            <option value="MA">Maranh√£o</option>
            <option value="MT">Mato Grosso</option>
            <option value="MS">Mato Grosso do Sul</option>
            <option value="MG">Minas Gerais</option>
            <option value="PA">Par√°</option>
            <option value="PB">Para√≠ba</option>
            <option value="PR">Paran√°</option>
            <option value="PE">Pernambuco</option>
            <option value="PI">Piau√≠</option>
            <option value="RJ">Rio de Janeiro</option>
            <option value="RN">Rio Grande do Norte</option>
            <option value="RS">Rio Grande do Sul</option>
            <option value="RO">Rond√¥nia</option>
            <option value="RR">Roraima</option>
            <option value="SC">Santa Catarina</option>
            <option value="SP">S√£o Paulo</option>
            <option value="SE">Sergipe</option>
            <option value="TO">Tocantins</option>
          </select>
        </div>
      </div>

      <div class="form-actions">
        <button 
          type="button" 
          (click)="prevStep()" 
          class="btn btn-secondary">
          ‚Üê Voltar
        </button>

        <button 
          type="submit"
          class="btn btn-success">
          ‚úÖ Enviar Solicita√ß√£o
        </button>
      </div>
    </div>
  </form>
</div>