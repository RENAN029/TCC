<div class="student-management-container">
  <div class="header-section">
    <button routerLink="/admin-dashboard" class="back-button">← Voltar</button>
    <h1>Gerenciar Estudantes</h1>
    <button (click)="logout()" class="logout-button">🚪 Sair</button>
  </div>

  <div class="controls-section">
    <div class="search-box">
      <input 
        type="text" 
        [(ngModel)]="searchTerm" 
        (input)="onSearchChange()"
        placeholder="Buscar por nome, email ou matrícula..."
        class="search-input">
      <span class="search-icon">🔍</span>
    </div>

    <div class="filters">
      <select 
        [(ngModel)]="filterStatus" 
        (change)="onFilterChange(filterStatus)"
        class="filter-select">
        <option value="all">Todos os status</option>
        <option value="active">Carteirinha Ativa</option>
        <option value="expired">Carteirinha Expirada</option>
        <option value="pending">Solicitação Pendente</option>
        <option value="rejected">Solicitação Rejeitada</option>
        <option value="none">Sem Carteirinha</option>
      </select>
    </div>
  </div>

  <div class="students-count">
    {{ filteredStudents.length }} estudante(s) encontrado(s)
  </div>

  <div class="students-list">
    <div *ngFor="let student of filteredStudents" class="student-card">
      <div class="student-main-info">
        <div class="student-avatar">
          {{ student.name.charAt(0).toUpperCase() }}
        </div>
        <div class="student-details">
          <h3>{{ student.name || 'Nome não informado' }}</h3>
          <p class="student-email">{{ student.email }}</p>
          <p class="student-registration">Matrícula: {{ student.registrationNumber }}</p>
        </div>
      </div>

      <div class="student-status">
        <span [class]="'status-badge ' + getActualStudentStatus(student)">
          {{ getStatusText(getActualStudentStatus(student)) }}
        </span>
        <p *ngIf="getActualStudentStatus(student) === 'expired'" class="expired-warning">
          ⚠️ Expirada
        </p>
        <p *ngIf="isCardExpiredForStudent(student) && getActualStudentStatus(student) === 'active'" class="expired-warning">
          ⚠️ Expirada (atualize a página)
        </p>
      </div>

      <div class="student-actions">
        <button 
          (click)="viewStudentDetails(student)"
          class="btn btn-info">
          👁️ Detalhes
        </button>
        <button 
          (click)="removeStudent(student)"
          class="btn btn-danger">
          🗑️ Remover
        </button>
      </div>
    </div>

    <div *ngIf="filteredStudents.length === 0" class="no-students">
      <div class="no-students-icon">👥</div>
      <h3>Nenhum estudante encontrado</h3>
      <p>Tente ajustar os filtros ou termos de busca.</p>
    </div>
  </div>
</div>